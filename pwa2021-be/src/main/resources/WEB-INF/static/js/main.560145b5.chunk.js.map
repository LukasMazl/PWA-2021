{"version":3,"sources":["config/GlobalConstant.js","api/ApiCaller.js","holder/UserContextHolder.js","component/MessageBox.js","component/MessageListViewer.js","action/UserAction.js","page/chat/ChatRoom.js","App.js","serviceWorker.js","index.js"],"names":["GlobalConstant","WEB_SOCKET_URL_SUFFIX","FULL_WEB_SOCKET_URL","HTTP_PROTOCOL","DOMAIN_NAME","ApiCaller","url","data","callback","errorCallback","onResp","callUrl","keys","Object","key","this","call","method","jsonData","JSON","stringify","request","headers","GLOBAL_CONST","mode","fetch","then","res","undefined","json","catch","console","log","ORIGIN_URL","REST_API_PREFIX","REST_API_ENDPOINT","GET_USER_CONTEXT","GET_LAST_MESSAGES_FROM_ROOM","SEND_MESSAGE_TO_ROOM","UserContextHolder","user","userHolder","MessageBox","message","props","messageAuthor","author","authorFullName","isMine","userId","avatar","userAvatar","startsSequence","startSequence","endsSequence","endSequence","friendlyTimestamp","Date","messageRowForTooltip","getMessageRowForTooltip","className","join","mine","Avatar","alt","src","title","React","MessageListViewer","scrollArea","scrollBottom","messages","length","messageBoxes","map","value","ref","e","speed","minScrollSize","style","height","UserAction","roomId","onGetMessage","getCall","error","onRecive","resp","ChatRoom","state","isLoaded","clientRef","messageList","messageBox","getLastDataForRoom","bind","onRes","sendMessage","container","direction","justify","alignItems","xs","id","label","inputRef","multiline","defaultValue","variant","fullWidth","margin","width","marginRight","color","onClick","push","setState","marginTop","component","disableSpacing","topics","onMessage","client","renderTextForm","renderChat","Component","App","isReady","getUserContext","getSetUserHolder","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.560145b5.chunk.js","sourcesContent":["class GlobalConstant {\r\n   /* static HTTP_PROTOCOL = \"http://\";\r\n    static DOMAIN_NAME = \"pwa-2021.herokuapp.com\";*/\r\n\r\n   static WEB_SOCKET_URL_SUFFIX = \"/ws\";\r\n\r\n    static HTTP_PROTOCOL = \"http://\";\r\n    static DOMAIN_NAME = \"localhost:8080\";\r\n    static FULL_WEB_SOCKET_URL = GlobalConstant.HTTP_PROTOCOL + GlobalConstant.DOMAIN_NAME + GlobalConstant.WEB_SOCKET_URL_SUFFIX;\r\n\r\n}\r\n\r\nexport default GlobalConstant;\r\n","import GLOBAL_CONST from \"../config/GlobalConstant\";\r\n\r\nclass ApiCaller {\r\n\r\n    static ORIGIN_URL = GLOBAL_CONST.HTTP_PROTOCOL + GLOBAL_CONST.DOMAIN_NAME;\r\n    static REST_API_PREFIX = \"/api/v1\";\r\n    static REST_API_ENDPOINT = ApiCaller.ORIGIN_URL + ApiCaller.REST_API_PREFIX;\r\n\r\n    static GET_USER_CONTEXT = \"/user/context\";\r\n    static GET_LAST_MESSAGES_FROM_ROOM = ApiCaller.REST_API_ENDPOINT + \"/room/messages\";\r\n    static SEND_MESSAGE_TO_ROOM = ApiCaller.REST_API_ENDPOINT + \"/send\";\r\n\r\n    static getCall(url, data, callback, errorCallback, onResp) {\r\n        let callUrl = url;\r\n        if(data !== null) {\r\n            const keys = Object.keys(data);\r\n            callUrl = callUrl + \"?\";\r\n            for (let key in keys) {\r\n                callUrl += keys[key] + \"=\" + data[keys[key]] + \"&\";\r\n            }\r\n        }\r\n        this.call(callUrl, \"GET\", null, callback, errorCallback, onResp);\r\n    }\r\n\r\n    static call(url, method, data, callback, errorCallback, onResp) {\r\n        let jsonData = (data !== null)? JSON.stringify(data): null;\r\n\r\n        let request = {\r\n            method: method,\r\n            headers: {\r\n                'Origin': GLOBAL_CONST.HTTP_PROTOCOL + GLOBAL_CONST.DOMAIN_NAME,\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept, Set-cookies, Authorization'\r\n            },\r\n            mode: \"cors\"\r\n        };\r\n\r\n        if(jsonData !== null) {\r\n            request[\"body\"] = jsonData;\r\n        }\r\n\r\n        fetch(url, request)\r\n            .then(res => {\r\n                if (onResp !== undefined) {\r\n                    return onResp(res);\r\n                } else {\r\n                    return res.json();\r\n                }\r\n            })\r\n            .then((data) => {\r\n                    callback(data);\r\n            })\r\n            .catch((data) => {\r\n                if (errorCallback !== undefined) {\r\n                    errorCallback(data);\r\n                } else {\r\n                    console.log(data);\r\n                }\r\n            })\r\n    }\r\n}\r\n\r\nexport default ApiCaller;\r\n","import ApiCaller from \"../api/ApiCaller\";\r\n\r\nclass UserContextHolder {\r\n    static userHolder = null;\r\n\r\n    setUserContext(user) {\r\n        UserContextHolder.userHolder = user;\r\n    }\r\n\r\n    getUserContext() {\r\n        return UserContextHolder.userHolder;\r\n    }\r\n}\r\n\r\nexport default UserContextHolder;\r\n","import * as React from \"react\";\r\n//import moment from 'moment';\r\nimport './Message.css';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\nimport Tooltip from \"@material-ui/core/Tooltip/Tooltip\";\r\nimport UserContextHolder from \"../holder/UserContextHolder\";\r\n\r\n\r\nclass MessageBox extends React.Component {\r\n\r\n    render() {\r\n        const message = this.props.message.message;\r\n        const messageAuthor = this.props.message.author.authorFullName;\r\n        const isMine = this.props.message.author.userId === UserContextHolder.userHolder.userId;\r\n        const avatar = this.props.message.author.userAvatar;\r\n        const startsSequence = (this.props.startSequence) ? this.props.startSequence : \"start\";\r\n        const endsSequence = (this.props.endSequence) ? this.props.endSequence : \"end\";\r\n        const showTimestamp = false;\r\n        // const friendlyTimestamp = moment(new Date()).format('LLLL');\r\n        const friendlyTimestamp = \"\" + new Date();\r\n\r\n        let messageRowForTooltip = this.getMessageRowForTooltip(messageAuthor, avatar, message, isMine, friendlyTimestamp);\r\n        return (\r\n                <div className={[\r\n                    'message',\r\n                    `${isMine ? 'mine' : ''}`,\r\n                    `${startsSequence ? 'start' : ''}`,\r\n                    `${endsSequence ? 'end' : ''}`\r\n                ].join(' ')}>\r\n                    {\r\n                        showTimestamp &&\r\n                        <div className=\"timestamp\">\r\n                            {friendlyTimestamp}\r\n                        </div>\r\n\r\n\r\n                    }\r\n                    {messageRowForTooltip}\r\n                </div>\r\n        );\r\n    }\r\n\r\n    getMessageRowForTooltip(messageAuthor, avatar, message, mine, friendlyTimestamp) {\r\n        if (!mine) {\r\n            return (\r\n                <div className=\"bubble-container\">\r\n\r\n                        <Avatar alt=\"Remy Sharp\" src={avatar}>\r\n                            B\r\n                        </Avatar>\r\n                        <div className=\"bubble\" title={friendlyTimestamp}>\r\n                            {message}\r\n                        </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (<div className=\"bubble-container\">\r\n\r\n                    <div className=\"bubble\">\r\n                        {message}\r\n                    </div>\r\n                    <Avatar alt=\"Remy Sharp\" src={avatar}>\r\n                        B\r\n                    </Avatar>\r\n            </div>);\r\n        }\r\n    }\r\n}\r\n\r\nexport default MessageBox;\r\n","import * as React from \"react\";\r\nimport MessageBox from \"./MessageBox\";\r\nimport ScrollArea from 'react-scrollbar';\r\n\r\nclass MessageListViewer extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.scrollArea = null;\r\n    }\r\n\r\n    onNewMessage() {\r\n        if(this.scrollArea !== null) {\r\n            this.scrollArea.scrollBottom();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const messages = this.props.messages;\r\n        if (messages.length > 0) {\r\n            let messageBoxes = messages.map((value, key) => {\r\n                return (\r\n                        <MessageBox message={value}/>\r\n                )\r\n            });\r\n\r\n            return (\r\n                <ScrollArea ref={(e) => {\r\n                    this.scrollArea = e;\r\n                }}\r\n                            speed={0.8}\r\n                            minScrollSize={400}\r\n                            style={{height: \"500px\"}}\r\n                >\r\n                    <div>\r\n                        {messageBoxes}\r\n                    </div>\r\n                </ScrollArea>\r\n            );\r\n        } else {\r\n            return (<div/>);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default MessageListViewer;\r\n","import ApiCaller from \"../api/ApiCaller\";\r\n\r\nclass UserAction {\r\n\r\n   static getLastDataForRoom(roomId, onGetMessage) {\r\n        ApiCaller.getCall(\r\n            ApiCaller.GET_LAST_MESSAGES_FROM_ROOM,\r\n            {\r\n                \"roomID\": roomId\r\n            },\r\n            (res) => {\r\n                onGetMessage(res);\r\n            },\r\n            (res) => {\r\n                console.error(res);\r\n            });\r\n    }\r\n\r\n    static sendMessage(roomId, value, onRecive) {\r\n        ApiCaller.call(ApiCaller.SEND_MESSAGE_TO_ROOM,\r\n            \"POST\",\r\n            {\r\n                \"roomId\": roomId,\r\n                \"message\": value\r\n            },\r\n            (resp) => {\r\n                onRecive();\r\n            }\r\n        );\r\n    }\r\n\r\n    static getUserContext(onRecive) {\r\n        ApiCaller.getCall(ApiCaller.GET_USER_CONTEXT,\r\n            null,\r\n            (resp) => {\r\n                onRecive(resp);\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserAction;\r\n","import React from \"react\";\r\nimport SockJsClient from 'react-stomp';\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport TextField from \"@material-ui/core/TextField/TextField\";\r\nimport Grid from \"@material-ui/core/Grid/Grid\";\r\nimport Card from \"@material-ui/core/Card/Card\";\r\nimport CardHeader from \"@material-ui/core/CardHeader/CardHeader\";\r\nimport CardContent from \"@material-ui/core/CardContent/CardContent\";\r\nimport Typography from \"@material-ui/core/Typography/Typography\";\r\nimport CardActions from \"@material-ui/core/CardActions/CardActions\";\r\nimport MessageListViewer from \"../../component/MessageListViewer\";\r\nimport ApiCaller from \"../../api/ApiCaller\";\r\nimport GlobalConstant from \"../../config/GlobalConstant\";\r\nimport UserAction from \"../../action/UserAction\"\r\n\r\nclass ChatRoom extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoaded: false,\r\n            messages: []\r\n        };\r\n        this.clientRef = null;\r\n        this.messageList = null;\r\n        this.messageBox = null;\r\n    }\r\n\r\n    renderChat(roomId) {\r\n        this.getLastDataForRoom(roomId);\r\n        return (<div/>);\r\n    }\r\n\r\n    getLastDataForRoom(roomId) {\r\n        UserAction.getLastDataForRoom(roomId, this.onGetMessage.bind(this));\r\n    }\r\n\r\n    sendMessage(roomId, value, onRes) {\r\n        UserAction.sendMessage(roomId, value, onRes);\r\n    }\r\n\r\n    renderTextForm(roomId) {\r\n        return (\r\n            <Grid container\r\n                  direction=\"row\"\r\n                  justify=\"space-between\"\r\n                  alignItems=\"center\">\r\n                <Grid xs={8}>\r\n                    <TextField\r\n                        id=\"message_text\"\r\n                        label=\"Message\"\r\n                        inputRef={(e) => {\r\n                            this.messageBox = e\r\n                        }}\r\n                        multiline\r\n                        defaultValue=\"\"\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        style={{margin: \"5px\"}}\r\n                    />\r\n                </Grid>\r\n                <Grid xs={3}>\r\n                    <Button variant=\"contained\" style={{width: \"100%\", height: \"100%\", marginRight: \"10px\"}}\r\n                            color={\"primary\"}\r\n                            onClick={(e) => {\r\n                                const value = this.messageBox.value;\r\n                                this.sendMessage(roomId, value, () => {\r\n                                    this.messageBox.value = \"\";\r\n                                });\r\n                            }}\r\n                    >\r\n                        Send\r\n                    </Button>\r\n                </Grid>\r\n            </Grid>\r\n        );\r\n    }\r\n\r\n    onMessage(message) {\r\n        const messageList = this.state.messages;\r\n        messageList.push(message);\r\n        this.setState({messages: messageList});\r\n    }\r\n\r\n    render() {\r\n        const roomId = this.props.roomId;\r\n        if (!this.state.isLoaded) {\r\n            return this.renderChat(roomId)\r\n        } else {\r\n            return (\r\n                <Card style={{marginTop: \"20px\"}}>\r\n                    <CardHeader title={<Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n                        {roomId}\r\n                    </Typography>}/>\r\n                    <CardContent>\r\n                        <MessageListViewer messages={\r\n                            this.state.messages\r\n                        }\r\n                                           ref={(e) => this.messageList = e}/>\r\n                    </CardContent>\r\n                    <CardActions disableSpacing>\r\n                        <SockJsClient url={GlobalConstant.FULL_WEB_SOCKET_URL} topics={['/topics/room/' + roomId]}\r\n                                      onMessage={this.onMessage.bind(this)}\r\n                                      ref={(client) => {\r\n                                          this.clientRef = client\r\n                                      }}/>\r\n                        {this.renderTextForm(roomId)}\r\n                    </CardActions>\r\n\r\n                </Card>\r\n            );\r\n        }\r\n    }\r\n\r\n    onGetMessage(res) {\r\n        const messages = res.messages;\r\n        this.setState({\r\n            messages: messages,\r\n            isLoaded: true\r\n        });\r\n    }\r\n}\r\n\r\nexport default ChatRoom;\r\n","import React, {Component} from 'react';\nimport './App.css';\nimport Grid from \"@material-ui/core/Grid/Grid\";\nimport Paper from \"@material-ui/core/Paper/Paper\";\nimport ChatRoom from \"./page/chat/ChatRoom\";\nimport UserContextHolder from \"./holder/UserContextHolder\";\nimport UserAction from \"./action/UserAction\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {isReady: false};\n    }\n\n    render() {\n        if (!this.state.isReady) {\n            this.getUserContext();\n            return (<div/>)\n        } else {\n            return (\n                <div>\n                    <Grid\n                        container\n                        direction=\"row\"\n                        justify=\"space-between\"\n                        alignItems=\"center\"\n                    >\n                        <Grid xs={3}>\n                            <Paper>\n                                Menu\n                            </Paper>\n                        </Grid>\n                        <Grid xs={5}>\n\n                            <ChatRoom roomId={\"testRoom\"}/>\n                        </Grid>\n\n                        <Grid xs={3}>\n                            <Paper>\n                                Uzivatel\n                            </Paper>\n                        </Grid>\n                    </Grid>\n                </div>\n            );\n        }\n    }\n\n    getSetUserHolder(res) {\n        console.log(res);\n        UserContextHolder.userHolder = res;\n        this.setState({isReady: true});\n    }\n\n    getUserContext() {\n        UserAction.getUserContext(this.getSetUserHolder.bind(this));\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}