(this["webpackJsonppwa-2021-ui"]=this["webpackJsonppwa-2021-ui"]||[]).push([[0],{154:function(e,t,a){e.exports=a(290)},159:function(e,t,a){},160:function(e,t,a){},260:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),l=(a(159),a(16)),i=a(19),c=a(27),u=a(25),m=(a(160),a(37)),d=a.n(m),E=a(148),h=a.n(E),g=a(69),v=a.n(g),f=a(101),p=a.n(f),O=a(140),y=a.n(O),b=a(141),_=a.n(b),S=a(142),T=a.n(S),R=a(143),I=a.n(R),j=a(36),M=a.n(j),C=a(144),k=a.n(C),x=(a(260),a(312)),A=function e(){Object(l.a)(this,e)};A.HTTP_PROTOCOL="https://",A.DOMAIN_NAME="pwa-2021.herokuapp.com",A.WEB_SOCKET_URL_SUFFIX="/ws",A.FULL_WEB_SOCKET_URL=(A.HTTP_PROTOCOL="http://")+(A.DOMAIN_NAME="localhost:8080")+A.WEB_SOCKET_URL_SUFFIX;var L=A,N=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"getCall",value:function(e,t,a,n,r){var s=e;if(null!==t){var o=Object.keys(t);for(var l in s+="?",o)s+=o[l]+"="+t[o[l]]+"&"}this.call(s,"GET",null,a,n,r)}},{key:"call",value:function(e,t,a,n,r,s){var o=null!==a?JSON.stringify(a):null,l={method:t,headers:{Origin:L.HTTP_PROTOCOL+L.DOMAIN_NAME,"Content-Type":"application/json","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept, Set-cookies, Authorization"},mode:"cors"};null!==o&&(l.body=o),fetch(e,l).then((function(e){return void 0!==s?s(e):e.json()})).then((function(e){n(e)})).catch((function(e){void 0!==r?r(e):console.log(e)}))}}]),e}();N.ORIGIN_URL=L.HTTP_PROTOCOL+L.DOMAIN_NAME,N.REST_API_PREFIX="/api/v1",N.REST_API_ENDPOINT=N.ORIGIN_URL+N.REST_API_PREFIX,N.GET_USER_CONTEXT="/user/context",N.GET_LAST_MESSAGES_FROM_ROOM=N.REST_API_ENDPOINT+"/room/messages",N.SEND_MESSAGE_TO_ROOM=N.REST_API_ENDPOINT+"/send";var w=N,F=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,[{key:"setUserContext",value:function(t){e.userHolder=t}},{key:"getUserContext",value:function(){return e.userHolder}}]),e}();F.userHolder=null;var P=F,U=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.message.message,t=this.props.message.author.authorFullName,a=this.props.message.author.userId===P.userHolder.userId,r=this.props.message.author.userAvatar,s=this.props.startSequence?this.props.startSequence:"start",o=this.props.endSequence?this.props.endSequence:"end",l=""+new Date,i=this.getMessageRowForTooltip(t,r,e,a,l);return n.createElement("div",{className:["message","".concat(a?"mine":""),"".concat(s?"start":""),"".concat(o?"end":"")].join(" ")},!1,i)}},{key:"getMessageRowForTooltip",value:function(e,t,a,r,s){return r?n.createElement("div",{className:"bubble-container"},n.createElement("div",{className:"bubble"},a),n.createElement(x.a,{src:t},"B")):n.createElement("div",{className:"bubble-container"},n.createElement(x.a,{src:t},"B"),n.createElement("div",{className:"bubble",title:s},a))}}]),a}(n.Component),B=a(139),D=a.n(B),H=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).scrollArea=null,n}return Object(i.a)(a,[{key:"onNewMessage",value:function(){null!==this.scrollArea&&this.scrollArea.scrollBottom()}},{key:"render",value:function(){var e=this,t=this.props.messages;if(t.length>0){var a=t.map((function(e,t){return n.createElement(U,{message:e})}));return n.createElement(D.a,{ref:function(t){e.scrollArea=t},speed:.8,minScrollSize:400,style:{height:"500px"}},n.createElement("div",null,a))}return n.createElement("div",null)}}]),a}(n.Component),G=function(){function e(){Object(l.a)(this,e)}return Object(i.a)(e,null,[{key:"getLastDataForRoom",value:function(e,t){w.getCall(w.GET_LAST_MESSAGES_FROM_ROOM,{roomID:e},(function(e){t(e)}),(function(e){console.error(e)}))}},{key:"sendMessage",value:function(e,t,a){w.call(w.SEND_MESSAGE_TO_ROOM,"POST",{roomId:e,message:t},(function(e){a()}))}},{key:"getUserContext",value:function(e){w.getCall(w.GET_USER_CONTEXT,null,(function(t){e(t)}))}}]),e}(),W=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isLoaded:!1,messages:[]},n.clientRef=null,n.messageList=null,n.messageBox=null,n}return Object(i.a)(a,[{key:"renderChat",value:function(e){return this.getLastDataForRoom(e),r.a.createElement("div",null)}},{key:"getLastDataForRoom",value:function(e){G.getLastDataForRoom(e,this.onGetMessage.bind(this))}},{key:"sendMessage",value:function(e,t,a){G.sendMessage(e,t,a)}},{key:"renderTextForm",value:function(e){var t=this;return r.a.createElement(d.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(d.a,{xs:8},r.a.createElement(y.a,{id:"message_text",label:"Message",inputRef:function(e){t.messageBox=e},multiline:!0,defaultValue:"",variant:"outlined",fullWidth:!0,style:{margin:"5px"}})),r.a.createElement(d.a,{xs:3},r.a.createElement(p.a,{variant:"contained",style:{width:"100%",height:"100%",marginRight:"10px"},color:"primary",onClick:function(a){var n=t.messageBox.value;t.sendMessage(e,n,(function(){t.messageBox.value=""}))}},"Send")))}},{key:"onMessage",value:function(e){var t=this.state.messages;t.push(e),this.setState({messages:t})}},{key:"render",value:function(){var e=this,t=this.props.roomId;return this.state.isLoaded?r.a.createElement(_.a,{style:{marginTop:"20px"}},r.a.createElement(T.a,{title:r.a.createElement(M.a,{variant:"body2",color:"textSecondary",component:"p"},t)}),r.a.createElement(I.a,null,r.a.createElement(H,{messages:this.state.messages,ref:function(t){return e.messageList=t}})),r.a.createElement(k.a,{disableSpacing:!0},r.a.createElement(v.a,{url:L.FULL_WEB_SOCKET_URL,topics:["/topics/room/"+t],onMessage:this.onMessage.bind(this),ref:function(t){e.clientRef=t}}),this.renderTextForm(t))):this.renderChat(t)}},{key:"onGetMessage",value:function(e){var t=e.messages;this.setState({messages:t,isLoaded:!0})}}]),a}(r.a.Component),X=a(146),q=a.n(X),K=a(147),J=a.n(K),z=a(145),Q=a.n(z),V=a(79),$=a.n(V),Y=a(80),Z=a.n(Y),ee=a(81),te=a.n(ee),ae=a(82),ne=a.n(ae),re=a(102),se=a.n(re),oe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:null},n}return Object(i.a)(a,[{key:"onMessage",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(v.a,{url:L.FULL_WEB_SOCKET_URL,topics:["/topics/user/online"],onMessage:this.onMessage.bind(this),ref:function(t){e.clientRef=t}}),r.a.createElement(Q.a,null,r.a.createElement($.a,{alignItems:"flex-start"},r.a.createElement(Z.a,null,r.a.createElement(te.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})),r.a.createElement(ne.a,{primary:"Brunch this weekend?",secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{component:"span",variant:"body2",color:"textPrimary"},"Ali Connors")," \u2014 I'll be in your neighborhood doing errands this\u2026")})),r.a.createElement(se.a,{variant:"inset",component:"li"}),r.a.createElement($.a,{alignItems:"flex-start"},r.a.createElement(Z.a,null,r.a.createElement(te.a,{alt:"Travis Howard",src:"/static/images/avatar/2.jpg"})),r.a.createElement(ne.a,{primary:"Summer BBQ",secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{component:"span",variant:"body2",color:"textPrimary"},"to Scott, Alex, Jennifer")," \u2014 Wish I could come, but I'm out of town this\u2026")})),r.a.createElement(se.a,{variant:"inset",component:"li"}),r.a.createElement($.a,{alignItems:"flex-start"},r.a.createElement(Z.a,null,r.a.createElement(te.a,{alt:"Cindy Baker",src:"/static/images/avatar/3.jpg"})),r.a.createElement(ne.a,{primary:"Oui Oui",secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{component:"span",variant:"body2",color:"textPrimary"},"Sandra Adams")," \u2014 Do you have Paris recommendations? Have you ever\u2026")}))))}}]),a}(n.Component),le=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isReady:!1,roomId:null},n}return Object(i.a)(a,[{key:"render",value:function(){return this.state.isReady?r.a.createElement("div",null,r.a.createElement(q.a,{position:"static",color:"secondary"},r.a.createElement(J.a,null,r.a.createElement(M.a,{variant:"h6"},"Chatting room"))),r.a.createElement(d.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(d.a,{xs:4},r.a.createElement(h.a,null,r.a.createElement(oe,null))),r.a.createElement(d.a,{alignItems:"center",xs:6},r.a.createElement(W,{roomId:this.state.roomId})))):(this.getUserContext(),r.a.createElement("div",null))}},{key:"getSetUserHolder",value:function(e){P.userHolder=e,this.setState({isReady:!0,roomId:e.lastRoomId})}},{key:"getUserContext",value:function(){G.getUserContext(this.getSetUserHolder.bind(this))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[154,1,2]]]);
//# sourceMappingURL=main.f2b7dd19.chunk.js.map